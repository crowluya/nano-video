# 多语言扩展 - 需求规范

> 本文档是功能的唯一真理来源，所有技术方案和实现都应基于此文档

---

## 元信息

| 字段 | 值 |
|------|-----|
| **创建日期** | 2026-01-31 |
| **负责人** | AI Assistant |
| **优先级** | P1 |
| **状态** | 开发中 |
| **基于规范** | @constitution.md |

---

## 用户故事

**作为一名** 全球用户
**我想要** 使用我的母语访问 Nano Banana Video
**以便于** 更好地理解和使用 AI 视频生成服务

### 背景说明

当前项目仅支持 3 种语言（en/zh/ja），限制了全球用户的访问。本次扩展旨在增加 9 种高价值语言，覆盖主要付费市场。

---

## 功能性需求

### 核心功能

1. **新增语言支持**
   - 描述：添加 9 种新语言到网站
   - 目标语言：es, fr, ko, pt, de, it, nl, ru, pl
   - 当前语言：en, zh, ja
   - 总计：12 种语言

2. **翻译文件管理**
   - 描述：为每种语言创建完整的翻译文件
   - 文件清单：
     - `common.json` - 通用文本（Header/Footer/UI）
     - `Landing.json` - 落地页文案
     - `NanoBananaVideo.json` - 功能介绍文案
     - `NotFound.json` - 404 页面

3. **语言切换器**
   - 描述：用户可在 12 种语言间切换
   - 显示：语言名称 + 国旗/图标
   - 记忆：记住用户选择

4. **SEO 优化**
   - 描述：为每种语言配置正确的 SEO 标签
   - hreflang 标签
   - 各语言 OG 图片
   - 语言特定的 sitemap

5. **字体适配**
   - 描述：确保各语言字符正确显示
   - 特别关注：韩语(Noto Sans KR)、俄语(Cyrillic)、波兰语(Latin Extended)

### 边界条件

**必须支持**：
- [x] 所有 12 种语言的翻译文件
- [x] 语言切换器 UI
- [x] hreflang 标签
- [x] 各语言 OG 图片
- [x] 字体正确渲染

**不支持**（明确排除）：
- [ ] RTL 语言（阿拉伯语、希伯来语）- 暂不实现
- [ ] 印地语 - 转化率低，暂不实现
- [ ] 自动翻译内容 - 仅静态翻译

---

## 非功能性需求

### 性能要求
- 语言切换响应时间 < 100ms
- 翻译文件加载不影响首屏渲染
- 字体加载时间 < 1s

### 质量要求
- 翻译准确率 > 95%
- 所有 key 在各语言中完整（无缺失）
- UI 文本无截断/溢出

### 安全要求
- 无特殊安全要求（纯内容变更）

---

## 验收标准

### 场景 1：语言切换
- [ ] 给定 用户在任何页面
- [ ] 当 用户点击语言切换器选择新语言
- [ ] 那么 URL 更新，页面内容切换到新语言

### 场景 2：SEO 验证
- [ ] 给定 搜索引擎爬虫访问网站
- [ ] 当 爬虫请求页面
- [ ] 那么 返回正确的 hreflang 标签和语言特定 OG 图片

### 场景 3：翻译完整性
- [ ] 给定 开发者检查翻译文件
- [ ] 当 运行检查脚本
- [ ] 那么 报告所有缺失的 key

### 场景 4：字体渲染
- [ ] 给定 用户使用任何支持的语言
- [ ] 当 页面加载
- [ ] 那么 所有字符正确渲染，无乱码

### 场景 5：URL 结构
- [ ] 给定 用户访问 `/es/pricing`
- [ ] 当 页面加载
- [ ] 那么 显示西班牙语的定价页面

---

## 约束条件

### 技术约束
- 必须使用 Next.js 16 (App Router)
- 必须使用 next-intl
- 必须遵循 @constitution.md
- 必须保持现有 3 语言功能正常

### 业务约束
- 翻译需要人工校对 AI 翻译结果
- OG 图片需要为每种语言生成

### 依赖约束
- 依赖 `i18n/routing.ts` - 语言配置
- 依赖 `i18n/messages/` - 翻译文件
- 依赖 `next-intl` - 国际化库

---

## 风险评估

| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|----------|
| AI 翻译质量差 | 高 | 中 | 人工校对关键页面 |
| UI 文本溢出 | 中 | 中 | 增加文本长度测试 |
| 字体加载失败 | 中 | 低 | 提供系统字体回退 |
| 缺少翻译 key | 高 | 中 | 自动检查脚本 |

---

## 附录

### 参考资料
- [next-intl 文档](https://next-intl-docs.vercel.app/)
- `i18n/routing.ts` - 当前语言配置
- `i18n/messages/` - 当前翻译文件

### 术语表
| 术语 | 定义 |
|------|------|
| locale | 语言代码，如 en, zh, ja |
| hreflang | HTML 标签，指示页面语言版本 |
| OG 图片 | Open Graph 图片，社交分享时显示 |

---

## 目标语言详情

### Phase 1: P0 优先（4 语言）
| 代码 | 语言 | 主要市场 | 使用人口 |
|------|------|----------|----------|
| `es` | Español | 西班牙 + 拉美 | 5亿+ |
| `fr` | Français | 法国 + 非洲法语区 | 3亿+ |
| `ko` | 한국어 | 韩国 | 5100万 |
| `pt` | Português | 巴西 + 葡萄牙 | 2.6亿 |

### Phase 2: P1 补充（3 语言）
| 代码 | 语言 | 主要市场 | 使用人口 |
|------|------|----------|----------|
| `de` | Deutsch | 德国/奥地利/瑞士 | 1亿+ |
| `it` | Italiano | 意大利/瑞士 | 7000万 |
| `ru` | Русский | 俄罗斯/东欧 | 2.6亿 |

### Phase 3: P2 完善（2 语言）
| 代码 | 语言 | 主要市场 | 使用人口 |
|------|------|----------|----------|
| `nl` | Nederlands | 荷兰/比利时 | 2800万 |
| `pl` | Polski | 波兰 | 3800万 |

---

*变更历史*
| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 1.0 | 2026-01-31 | 初始版本 | AI Assistant |
